(window.webpackJsonp=window.webpackJsonp||[]).push([[252],{1445:function(i,n,t){"use strict";t.d(n,"a",(function(){return r}));var e=t(0),o=t.n(e);function a(i,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}var r=function(){function i(n){!function(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),this.formElement=n,this.emailOptInTypeSelector=o()('[name="signature[email_opt_in_type_id]"]',this.formElement),this.checkboxJoinOrganisationSelector=o()('input[type="checkbox"][name="signature[join_organisation]"]',this.formElement),this.radioJoinOrganisationSelector=o()('input[type="radio"][name="signature[join_organisation]"][value="true"]',this.formElement),this.joinOrganisationFieldWrapperSelector=o()("div.join-organisation-field-wrapper"),this.joinOrganisationTrueSelector=o()('input[type="checkbox"][name="signature[join_organisation]"],input[type="radio"][name="signature[join_organisation]"][value="true"]',this.formElement)}var n,t,e;return n=i,(t=[{key:"hide",value:function(){this.checkboxJoinOrganisationSelector.parents(".checkbox").hide(),this.radioJoinOrganisationSelector.parents(".radio_buttons").hide(),this.joinOrganisationFieldWrapperSelector.hide()}},{key:"show",value:function(){this.checkboxJoinOrganisationSelector.parents(".checkbox").show(),this.radioJoinOrganisationSelector.parents(".radio_buttons").show(),this.joinOrganisationFieldWrapperSelector.show()}},{key:"remove",value:function(){this.checkboxJoinOrganisationSelector.parents(".checkbox").remove(),this.radioJoinOrganisationSelector.parents(".radio_buttons").remove()}},{key:"setTrue",value:function(){this.joinOrganisationTrueSelector.prop("checked",!0)}},{key:"unSetTrue",value:function(){this.joinOrganisationTrueSelector.prop("checked",!1)}},{key:"setEmailOptInType",value:function(i){this.emailOptInTypeSelector.val(i)}},{key:"getEmailOptInType",value:function(){this.emailOptInTypeSelector.val()}}])&&a(n.prototype,t),e&&a(n,e),i}()},1692:function(i,n,t){"use strict";t.r(n);var e=t(1445);function o(i,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}var a=function(){function i(n,t,o,a){!function(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),this.$formElement=n,this.globalStatusCheckUrl=t,this.externalEmailOptInTypeId=o,this.displayJoinOrganisationIfNotFoundOnCrm=a,this.joinOrganisation=new e.a(this.$formElement),this.originalEmailOptInTypeId=this.joinOrganisation.getEmailOptInType()}var n,t,a;return n=i,(t=[{key:"cancelGlobalSubscriptionSet",value:function(i){var n=i.data.that;n.joinOrganisation.unSetTrue(),n.joinOrganisation.setEmailOptInType(n.originalEmailOptInTypeId),n.displayJoinOrganisationIfNotFoundOnCrm&&n.joinOrganisation.show()}},{key:"retrieveGlobalSubscriptionStatus",value:function(){$.ajax({url:this.globalStatusCheckUrl,type:"GET",dataType:"json",context:this,success:function(i){i.subscribed&&(this.joinOrganisation.setTrue(),this.joinOrganisation.hide(),this.joinOrganisation.setEmailOptInType(this.externalEmailOptInTypeId),$('input[name="signature[email]"]',this.$formElement).on("change",{that:this},this.cancelGlobalSubscriptionSet))},error:function(){this.displayJoinOrganisationIfNotFoundOnCrm||this.joinOrganisation.hide()}})}}])&&o(n.prototype,t),a&&o(n,a),i}(),r=$(".sign-the-petition-form"),s=r.data("global-check-url");if(s&&s.length>0){var l=r.data("external-email-opt-in-type-id"),c=r.data("display-join-organisation-if-not-found-on-crm");new a(r,s,l,c).retrieveGlobalSubscriptionStatus()}}}]);
//# sourceMappingURL=252-23da75dc62c2ea19bcd7.chunk.js.map